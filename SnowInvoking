---
- name: Assign Tickets in Round Robin Fashion
  hosts: localhost
  gather_facts: false
  vars:
    team_members:
      - Alice
      - Bob
      - Charlie
      - Dave
    last_assigned_member: "Alice"
  tasks:
    - name: Assign Tickets
      set_fact:
        assigned_tickets: "{{ team_members | map('extract', [team_members.index(last_assigned_member) | default(0) | int, team_members.index(last_assigned_member) | default(0) | int + 1]) | list }}"
      register: result

    - name: Print Assigned Tickets
      debug:
        msg: "Assigned tickets: {{ assigned_tickets }}"



---
- name: Assign Tickets in Round Robin Fashion
  hosts: localhost
  gather_facts: false
  vars:
    team_members:
      - Alice
      - Bob
      - Charlie
      - Dave
    last_assigned_member: "Alice"
    tickets_to_assign: 3  # Number of tickets to assign for testing
  tasks:
    - name: Assign Tickets
      set_fact:
        assigned_tickets: "{{ team_members | custom_cycle(last_assigned_member) | map('extract', [0, tickets_to_assign]) | list }}"
      register: result

    - name: Update last assigned member
      set_fact:
        last_assigned_member: "{{ assigned_tickets[-1] | default(last_assigned_member) }}"
  filters:
    - name: custom_cycle
      module: inline
      code: |
        def custom_cycle(list_to_cycle, start_item=None):
            if start_item is None:
                start_item = list_to_cycle[0]
            else:
                index = list_to_cycle.index(start_item)
                list_to_cycle = list_to_cycle[index:] + list_to_cycle[:index]
            return list_to_cycle
